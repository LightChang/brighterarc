# ç«‹æ³•é™¢è³‡æ–™è½‰å‘é‡è³‡æ–™åº«

è‡ªå‹•åŒ–æŠ“å–å°ç£ç«‹æ³•é™¢è¡Œæ”¿é™¢ç­”å¾©è³‡æ–™ï¼Œä½¿ç”¨ AI å‘é‡åŒ–æŠ€è¡“å»ºç«‹èªæ„æœå°‹å¼•æ“ï¼Œè®“æ‚¨ç”¨è‡ªç„¶èªè¨€å¿«é€ŸæŸ¥è©¢ç›¸é—œè­°æ¡ˆã€‚

[![æ¯æ—¥è‡ªå‹•æ›´æ–°](https://github.com/LightChang/brighterarc/actions/workflows/daily-update.yml/badge.svg)](https://github.com/LightChang/brighterarc/actions)
[![æœ€æ–° Release](https://img.shields.io/github/v/release/LightChang/brighterarc)](https://github.com/LightChang/brighterarc/releases)

ğŸ” **èªæ„æœå°‹** | ğŸ¤– **AI Embeddings** | ğŸ“Š **æ¯æ—¥æ›´æ–°** | ğŸ’¾ **é–‹æ”¾è³‡æ–™**

è‡ªå‹•åŒ–æŠ“å–å°ç£ç«‹æ³•é™¢è¡Œæ”¿é™¢ç­”å¾©è³‡æ–™ï¼Œè½‰æˆå‘é‡è³‡æ–™åº«å¾Œï¼Œæ–¹ä¾¿å¤§å®¶æŸ¥è©¢ã€æ•´ç†ã€é–±è®€ã€‚

è³‡æ–™å¯è‡ª Release ä¸­è‡ªè¡Œä¸‹è¼‰é‡è¤‡æ‡‰ç”¨ã€‚

æ­¡è¿æäº¤ Issue æˆ– Pull Requestï¼

## ä½¿ç”¨æƒ…å¢ƒ

### ğŸ“š ç ”ç©¶è€…
  - å¿«é€Ÿæ‰¾åˆ°ç‰¹å®šè­°é¡Œçš„è¡Œæ”¿é™¢ç­”å¾©
  - åˆ†ææ”¿ç­–æ¼”è®Šè¶¨å‹¢
  - æ¯”å°ä¸åŒå±†æœŸçš„å›æ‡‰å…§å®¹

### ğŸ’¼ åª’é«”å·¥ä½œè€…
  - äº‹å¯¦æŸ¥æ ¸ï¼šæŸ¥è©¢æ­·å²æ‰¿è«¾
  - æ·±åº¦å ±å°ï¼šè¿½è¹¤è­°é¡Œè„ˆçµ¡
  - è³‡æ–™é©—è­‰ï¼šç¢ºèªå®˜æ–¹èªªæ³•

### ğŸ‘¨â€ğŸ’» é–‹ç™¼è€…
  - å»ºç«‹æ”¿æ²»åˆ†æå·¥å…·
  - é–‹ç™¼å…¬æ°‘åƒèˆ‡å¹³å°
  - æ•´åˆåˆ°æ—¢æœ‰ç³»çµ±

## è³‡æ–™ä¾†æº

**ç«‹æ³•é™¢é–‹æ”¾è³‡æ–™å¹³å°**
  - API: è¡Œæ”¿é™¢å°ç«‹æ³•é™¢è­°æ¡ˆæ±ºè­°åŸ·è¡Œæƒ…å½¢ä¹‹ç­”å¾©
  - ç¶²å€: https://data.ly.gov.tw/
  - è³‡æ–™æ ¼å¼: JSON
  - æ›´æ–°é »ç‡: å®šæœŸæ›´æ–°

**è³‡æ–™æ¬„ä½**ï¼š
  - å±†æœŸï¼ˆtermï¼‰
  - æœƒæœŸï¼ˆsessionPeriodï¼‰
  - æœƒè­°æ¬¡æ•¸ï¼ˆsessionTimesï¼‰
  - è¡Œæ”¿é™¢æ–‡è™Ÿï¼ˆeyNumberï¼‰
  - ç«‹æ³•é™¢æ–‡è™Ÿï¼ˆlyNumberï¼‰
  - ä¸»é¡Œï¼ˆsubjectï¼‰
  - å…§å®¹ï¼ˆcontentï¼‰
  - æ–‡ä»¶ URLï¼ˆdocUrlï¼‰


## ç’°å¢ƒè®Šæ•¸

```bash
# OpenAI APIï¼ˆæŠ“å–èˆ‡æŸ¥è©¢æ™‚éœ€è¦ï¼‰
export OPENAI_API_KEY="sk-..."

# Qdrant é€£ç·šï¼ˆä¸Šå‚³èˆ‡æŸ¥è©¢æ™‚éœ€è¦ï¼‰
export QDRANT_URL="https://xxx.gcp.cloud.qdrant.io:6333"  # Cloud
export QDRANT_API_KEY="your-api-key"                   # Cloud ç‰ˆéœ€è¦
```

## å°ˆæ¡ˆçµæ§‹

```
brighterarc/
â”œâ”€â”€ lib/                               # å‡½å¼åº«
â”‚   â”œâ”€â”€ core.sh                        # æ ¸å¿ƒå·¥å…·
â”‚   â”œâ”€â”€ args.sh                        # åƒæ•¸è§£æ
â”‚   â”œâ”€â”€ openai.sh                      # OpenAI API
â”‚   â””â”€â”€ qdrant.sh                      # Qdrant API
â”‚
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ daily/                         # æ¯æ—¥è³‡æ–™
â”‚   â”‚   â””â”€â”€ YYYY-MM-DD.jsonl
â”‚   â””â”€â”€ monthly/                       # æœˆåº¦ç´¯ç©ï¼ˆGit å¿½ç•¥ï¼‰
â”‚       â””â”€â”€ legislative_YYYYMM.jsonl
â”‚
â”œâ”€â”€ fetch_legislative_data.sh          # æŠ“å– + embeddings
â”œâ”€â”€ update_legislative_qdrant.sh       # ä¸Šå‚³åˆ° Qdrant
â”œâ”€â”€ build_legislative_release.sh       # å»ºç«‹ Release
â”œâ”€â”€ query_legislative_data.sh          # æŸ¥è©¢å·¥å…·
â”‚
â”œâ”€â”€ .github/workflows/
â”‚   â””â”€â”€ daily-update.yml               # æ¯æ—¥è‡ªå‹•æ›´æ–°
â”‚
â”œâ”€â”€ CLAUDE.md                          # æŠ€è¡“æ–‡ä»¶ï¼ˆä¾› Claude Code ä½¿ç”¨ï¼‰
â””â”€â”€ README.md                          # æœ¬æª”æ¡ˆ
```

## è‡ªå‹•åŒ–æ›´æ–° GitHub Actions

æ¯å¤© UTC 18:30ï¼ˆå°åŒ—æ™‚é–“ 2:30ï¼‰è‡ªå‹•åŸ·è¡Œï¼š

1. æŠ“å–æœ€æ–°è³‡æ–™ä¸¦è¨ˆç®— embeddings
2. ä¸Šå‚³åˆ° Qdrant
3. æ›´æ–°ç•¶æœˆ Release
4. æäº¤æ¯æ—¥è³‡æ–™åˆ° Git

## æŠ€è¡“ç´°ç¯€

### Embedding æ¨¡å‹

  - **æ¨¡å‹**: OpenAI `text-embedding-3-small`
  - **ç¶­åº¦**: 1536
  - **è·é›¢åº¦é‡**: Cosine

### æ–‡ä»¶åˆ†å¡Š

  - **è§¸ç™¼æ¢ä»¶**: æ–‡ä»¶ > 4000 å­—å…ƒ
  - **åˆ†å¡Šå¤§å°**: 4000 å­—å…ƒ
  - **é‡ç–Šå€åŸŸ**: 500 å­—å…ƒ
  - **ID ç”Ÿæˆ**: MD5 hash è½‰æ›ç‚º UUID æ ¼å¼

### è³‡æ–™å»é‡

ä½¿ç”¨ `jq` ä¾ç…§ point ID åˆ†çµ„ï¼Œä¿ç•™æœ€æ–°ç‰ˆæœ¬ï¼š

```bash
jq -s 'group_by(.id) | map(max_by(.payload.updated // "")) | .[]' -c
```

### æ‰¹æ¬¡ä¸Šå‚³

  - **é è¨­æ‰¹æ¬¡å¤§å°**: 100 points
  - **ç¶²è·¯é‡è©¦**: æœ€å¤š 3 æ¬¡
  - **é‡è©¦å»¶é²**: 0.5 ç§’

### ç¶²è·¯é‡è©¦æ©Ÿåˆ¶

  - **é‡è©¦æ¬¡æ•¸**: æœ€å¤š 3 æ¬¡
  - **é‡è©¦å»¶é²**: 1 åˆ†é˜
  - **é©ç”¨å ´æ™¯**: OpenAI API é€¾æ™‚ã€ç¶²è·¯ä¸ç©©å®š
  - **è¡Œç‚º**: è‡ªå‹•ç­‰å¾…ä¸¦é‡è©¦ï¼Œå¤±æ•—å¾Œè¨˜éŒ„éŒ¯èª¤ç¹¼çºŒè™•ç†

## å¯«çµ¦å·¥ç¨‹å¸«

### ç³»çµ±æ¶æ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ fetch_legislative_data.sh                   â”‚
â”‚   â”œâ”€> ç«‹æ³•é™¢ OpenData API                   â”‚
â”‚   â”œâ”€> OpenAI Embeddings API                 â”‚
â”‚   â””â”€> data/daily/YYYY-MM-DD.jsonl           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ update_legislative_qdrant.sh                â”‚
â”‚   â”œâ”€> è®€å– JSONL æª”æ¡ˆ                        â”‚
â”‚   â”œâ”€> æ‰¹æ¬¡ä¸Šå‚³                              â”‚
â”‚   â””â”€> Qdrant Vector Database                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ build_legislative_release.sh                â”‚
â”‚   â”œâ”€> ä¸‹è¼‰ç•¶æœˆ Release                       â”‚
â”‚   â”œâ”€> åˆä½µ + å»é‡ + å£“ç¸®                     â”‚
â”‚   â””â”€> æ›´æ–° GitHub Release                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒè…³æœ¬

```bash
# è¨­å®šç’°å¢ƒè®Šæ•¸
export OPENAI_API_KEY="sk-..."
export QDRANT_URL="https://xxx.gcp.cloud.qdrant.io:6333"
export QDRANT_API_KEY="your-api-key"
```

#### 1. fetch_legislative_data.sh - æŠ“å–è³‡æ–™

```bash
# 1. æŠ“å–æœ€æ–°è³‡æ–™
./fetch_legislative_data.sh --limit 100
```

**æ ¼å¼**ï¼š
```json
{
  "id": "abc-123-def-456",
  "vector": [0.1, 0.2, ...],
  "payload": {
    "term": "10",
    "sessionPeriod": "1",
    "subject": "é—œæ–¼åŸä½æ°‘æ—åœŸåœ°æ¬Šåˆ©ä¿éšœ",
    "content": "è¡Œæ”¿é™¢èŒ²å°±ç«‹æ³•é™¢...",
    ...
  }
}
```

#### 2. update_legislative_qdrant.sh - ä¸Šå‚³ JSONL æª”æ¡ˆåˆ° Qdrant å‘é‡è³‡æ–™åº«ã€‚

```bash
# 2. ä¸Šå‚³åˆ° Qdrant
./update_legislative_qdrant.sh --input data/daily/$(date +%Y-%m-%d).jsonl
```

**åƒæ•¸èªªæ˜**ï¼š
- `--input FILE`: è¼¸å…¥æª”æ¡ˆï¼ˆå¿…å¡«ï¼Œæ”¯æ´ .jsonl å’Œ .jsonl.gzï¼‰
- `--collection NAME`: Collection åç¨±ï¼ˆé è¨­ï¼šlegislative_repliesï¼‰
- `--batch-size N`: æ‰¹æ¬¡å¤§å°ï¼ˆé è¨­ï¼š100ï¼‰
- `--skip-existing`: è·³éå·²å­˜åœ¨çš„ pointsï¼ˆflagï¼‰

#### 3. build_legislative_release.sh - å»ºç«‹æˆ–æ›´æ–°æœˆåº¦ GitHub Releaseã€‚

```bash
# 3. å»ºç«‹/æ›´æ–° Release ï¼ˆè‡³æ­¤å°‡å¾—åˆ°å’Œ Release ä¸­ä¸€æ¨£çš„çµæœï¼‰
./build_legislative_release.sh
```

**è™•ç†æµç¨‹**ï¼š
1. ä¸‹è¼‰ç¾æœ‰æœˆåº¦ Releaseï¼ˆå¦‚å­˜åœ¨ï¼‰
2. åˆä½µä»Šæ—¥è³‡æ–™
3. å»é‡ï¼ˆä¿ç•™æœ€æ–°ç‰ˆæœ¬ï¼‰
4. å£“ç¸®ä¸¦æ›´æ–° Release


#### 4. query_legislative_data.sh - ä½¿ç”¨è‡ªç„¶èªè¨€æŸ¥è©¢ç«‹æ³•é™¢è³‡æ–™ã€‚

```bash
# åŸºæœ¬æŸ¥è©¢
./query_legislative_data.sh --query "æ•™è‚²é ç®—"

# æŒ‡å®šçµæœæ•¸é‡
./query_legislative_data.sh --query "æ•™è‚²æ”¹é©" --limit 10

# JSON æ ¼å¼è¼¸å‡º
./query_legislative_data.sh --query "ç’°ä¿æ”¿ç­–" --format json
```

**åƒæ•¸èªªæ˜**ï¼š
- `--query "æ–‡å­—"`: æŸ¥è©¢æ–‡å­—ï¼ˆå¿…å¡«ï¼‰
- `--limit N`: çµæœæ•¸é‡ï¼ˆé è¨­ï¼š10ï¼‰
- `--collection NAME`: Collection åç¨±ï¼ˆé è¨­ï¼šlegislative_repliesï¼‰
- `--format text|json`: è¼¸å‡ºæ ¼å¼ï¼ˆé è¨­ï¼štextï¼‰

**è¼¸å‡ºç¯„ä¾‹**ï¼ˆtext æ ¼å¼ï¼‰ï¼š
```
===========================================
æŸ¥è©¢ï¼šåŸä½æ°‘æ”¿ç­–
ç›¸ä¼¼åº¦æœå°‹çµæœï¼ˆTop 5ï¼‰
===========================================

1. [ç›¸ä¼¼åº¦: 0.8921] ç¬¬ 10 å±†ç¬¬ 1 æœƒæœŸ
   æœƒè­°æ¬¡æ•¸: 5
   è¡Œæ”¿é™¢æ–‡è™Ÿ: é™¢ç¸½ç¬¬1234è™Ÿ
   ç«‹æ³•é™¢æ–‡è™Ÿ: å§”å“¡ææ¡ˆç¬¬5678è™Ÿ

   ä¸»é¡Œ: é—œæ–¼åŸä½æ°‘æ—åœŸåœ°æ¬Šåˆ©ä¿éšœä¹‹è³ªè©¢

   å…§å®¹:
   è¡Œæ”¿é™¢èŒ²å°±ç«‹æ³•é™¢å¯©è­°åŸä½æ°‘æ—åœŸåœ°æ¬Šåˆ©ä¿éšœç›¸é—œææ¡ˆ...

   ç¶²å€: https://lci.ly.gov.tw/...

-------------------------------------------
```